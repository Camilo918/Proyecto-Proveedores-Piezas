{% extends 'base.html' %}
{% block content %}
<h1>Proveedor: {{ provider.name }}</h1>
<p><strong>Dirección:</strong> {{ provider.address }}<br>
   <strong>Ciudad:</strong> {{ provider.city }}<br>
   <strong>Provincia:</strong> {{ provider.province }}</p>

<h2>Piezas suministradas</h2>
<table>
    <tr><th>Supply ID</th><th>Pieza</th><th>Precio</th><th>Cantidad</th><th>Color</th><th>Categoría</th><th>Acciones</th></tr>
    {% for s in provider.supplies %}
    <tr>
        <td>{{ s.id }}</td>
        <td>{{ s.piece.name }}</td>
        <td>{{ s.price }}</td>
        <td>{{ s.quantity }}</td>
        <td>{{ s.color }}</td>
        <td>{{ s.category }}</td>
        <td>
            <form method="post" action="{{ url_for('main.delete_supply', sid=s.id) }}" style="display:inline" onsubmit="return confirm('Eliminar asociación?')">
                <button type="submit">Eliminar</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>

<h3>Asociar / Actualizar pieza</h3>
<form method="post">
    <label>Pieza:
        <select name="piece_id">
            {% for piece in pieces %}
                <option value="{{ piece.id }}">{{ piece.name }}</option>
            {% endfor %}
        </select>
    </label><br>
    <label>Precio: <input name="price" type="number" step="0.01"></label><br>
    <label>Cantidad: <input name="quantity" type="number"></label><br>
    <label>Color: <input name="color"></label><br>
    <label>Categoría: <input name="category"></label><br>
    <button type="submit">Asociar / Actualizar</button>
</form>
{% endblock %}\n